---
import {getCollection, render} from 'astro:content'
import {Image} from 'astro:assets'
import loadContentImage from '../utils/load-content-image'
import MainLayout from '../partials/main-layout.astro'

export async function getStaticPaths() {
  const articles = await getCollection('articles')
  return articles.map(article => ({
    params: {article: article.id},
    props: {article}
  }))
}


const {article} = Astro.props
const {title, image} = article.data
const {Content} = await render(article)
---
<MainLayout title={title}>
  {image && <Image src={loadContentImage(image)} alt="" />}
  <h1>{title}</h1>
  <Content />
</MainLayout>